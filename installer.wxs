
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Product
      Id="*"
      Name="Waviate Flow"
      Language="1033"
      Version="1.0.0.0"
      Manufacturer="Waviate"
      UpgradeCode="REPLACE-WITH-STABLE-UPGRADECODE-GUID">
    <Package InstallerVersion="500" Compressed="yes" InstallScope="perMachine" Platform="x64" />

    <MediaTemplate />

    <MajorUpgrade
        Schedule="afterInstallInitialize"
        DowngradeErrorMessage="A newer version of Waviate Flow is already installed." />

    <Property Id="ARPNOREPAIR" Value="1" />
    <Property Id="ARPNOMODIFY" Value="1" />

    <Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id="ProgramFiles64Folder">
        <Directory Id="DIR_WAVIATE" Name="Waviate">
          <Directory Id="INSTALLFOLDER" Name="Waviate Flow" />
        </Directory>
      </Directory>
      <Directory Id="CommonFiles64Folder">
        <Directory Id="VST3FOLDER" Name="VST3" />
      </Directory>
      <Directory Id="ProgramMenuFolder">
        <Directory Id="AppProgramMenuDir" Name="Waviate Flow" />
      </Directory>
    </Directory>


    <DirectoryRef Id="INSTALLFOLDER">
      <Component Id="cmp_Exe" Guid="REPLACE-WITH-STABLE-COMP-GUID-1">
        <File Id="fil_App" Source="Builds\VisualStudio2022\Waviate Flow.exe" KeyPath="yes" />
        <Shortcut Id="sc_AppMenu" Directory="AppProgramMenuDir" Name="Waviate Flow"
                  WorkingDirectory="INSTALLFOLDER" Icon="app.ico" Advertise="no"
                  Target="[INSTALLFOLDER]Waviate Flow.exe" />
        <RemoveFolder Id="RemoveAppDir" Directory="AppProgramMenuDir" On="uninstall" />
        <RegistryValue Root="HKMU" Key="Software\Waviate\Waviate Flow" Name="installed" Type="integer" Value="1" KeyPath="yes" />
      </Component>
    </DirectoryRef>

    <DirectoryRef Id="VST3FOLDER">
      <Component Id="cmp_Vst3" Guid="REPLACE-WITH-STABLE-COMP-GUID-2">
        <File Id="fil_Vst3" Source="Builds\VisualStudio2022\WaviateFlow.vst3" KeyPath="yes" />
      </Component>
    </DirectoryRef>

    <Feature Id="F_Main" Title="Waviate Flow" Level="1">
      <ComponentRef Id="cmp_Exe" />
      <ComponentRef Id="cmp_Vst3" />
    </Feature>

    <Icon Id="app.ico" SourceFile="installer\app.ico"/>
    <Property Id="ARPPRODUCTICON" Value="app.ico"/>
  </Product>
</Wix>
